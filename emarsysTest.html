<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Data Table</title>
  <style>
    table {
      border-collapse: collapse;
      width: 100%;
    }
    th, td {
      border: none;
      padding: 8px;
      text-align: left;
    }
    .grey-shade {
      color: #888888;
    }
  </style>
</head>
<body>
  <h2>Emarsys Campaign</h2>
  <table id="dataTable">
    <tr>
      <th>Customer Details</th>
    </tr>
  </table>

  <script>
    // The JSON data
    const jsonData = {
      "EmarsysContactData": "{\"id\":\"370791343\",\"uid\":\"Y8eV006lMz\",\"First Name\":\"Vikas\",\"Last Name\":\"Mittal\",\"Email\":\"vikas.mittal@nsinch.com\",\"Date of Birth\":\"1975-01-09\",\"Gender\":\"Male\",\"Marital Status\":\"Married\",\"Children\":\"1\",\"Education\":\"College, College/University degree\",\"Title\":\"Dr.\",\"Address\":\"Linnoitustie 4\",\"City\":\"Espoo\",\"State\":\"Uussimma\",\"ZIP Code\":\"026230\",\"Country or region\":\"UK\",\"Phone\":null,\"Fax\":null,\"Job Position\":\"Student\",\"Company\":\"Since\",\"Department\":\"Information Technology\",\"Industry\":\"Financial Services\",\"Phone (office)\":null,\"Fax (office)\":null,\"Number of Employees\":\"1,000 - 2,499\",\"Annual Revenue (in 000 EUR)\":null,\"URL\":\"www.sinch.com\",\"Preferred email format\":null,\"Page views per day\":null,\"Days since last email sent\":null,\"Avg\":{\" length of visit (minutes)\":null}}"
      // ... (other data)
    };

    // Function to create HTML table row for a single record
    function createTableRow(key, value) {
      const tr = document.createElement("tr");
      const td = document.createElement("td");
      td.innerHTML = `<span class="grey-shade">${key}</span><br>${value}`;
      tr.appendChild(td);
      return tr;
    }

 function parseAndPopulateTable(contatData) {
            const table = document.getElementById("dataTable");
            const emarsysData = JSON.parse(contatData.EmarsysContactData);
            for (const key in emarsysData) {
              if (emarsysData.hasOwnProperty(key)) {
                  const value = emarsysData[key];
                 if (key !== "id" && key !=="uid" && value !== null){
                   const row = createTableRow(key, value);
                   table.appendChild(row);
                 }
              }
            }
          }

    // Parse and populate the table
    parseAndPopulateTable(jsonData);
  </script>
</body>
</html>
