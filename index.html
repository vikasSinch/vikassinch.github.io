<!DOCTYPE html>
<html lang="en" style="width:100%;height: 100%;">
<head>
                <meta charset=" UTF-8">
                <title>3rd Party extension testing</title>
</head>
<body style="margin: 0;width:100%;height: 100%">
<!-- Below Iframe is loaded inside the extension area, that loads the webpage from www.fonecta.fi -->
<iframe id="frame" style="border: 0;width: 100%;height: 100%" src="https://www.fonecta.fi"></iframe>


<!-- Below script gets the call data, finds the caller phone number (originator) and updates the Iframe url with the new url to fonecta with search query string.-->
<script>
			alert("Test3");
			var _onMessage = function(oEvent) {
				if (oEvent.data.type === "response" && oEvent.data.payload.result !== "error") {
					var data = oEvent.data.payload.value;
					if (data.channel_type === "phone" && data.originator){
						alert(data.originator);
						window.open("https://www.fonecta.fi/haku/" + data.originator, "newWindow", "left=100,top=100,width=600,height=800");
						//document.getElementById("frame").setAttribute("src", "https://www.fonecta.fi/haku/" + data.originator)
						//document.getElementById("frame").src = "https://www.fonecta.fi/haku/" + data.originator;
					}
				}
			}

			window.addEventListener("message", _onMessage);
			window.parent.postMessage({type: "init", payload: false, id: "fn-1"}, "*");

</script>

</body>
</html>
